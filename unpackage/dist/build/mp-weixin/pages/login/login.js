(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login"],{"3e89":function(e,t,o){"use strict";o.r(t);var i=o("edfb"),n=o.n(i);for(var a in i)"default"!==a&&function(e){o.d(t,e,function(){return i[e]})}(a);t["default"]=n.a},"8bd3":function(e,t,o){"use strict";var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("view",{staticClass:"content"},[e._m(0),o("view",{staticClass:"uni-input-box"},[o("view",{staticClass:"uni-input-box1"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.mobile,expression:"mobile"}],attrs:{type:"number",value:"",placeholder:"请输入手机号","placeholder-style":"color:#ffffff;",eventid:"4233f73e-0"},domProps:{value:e.mobile},on:{input:function(t){t.target.composing||(e.mobile=t.target.value)}}}),o("uni-icon",{staticClass:"icon",attrs:{mpcomid:"4233f73e-0"}})],1),o("view",{staticClass:"uni-input-box1"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"code"}],attrs:{type:"text",value:"",placeholder:"请输入验证码","placeholder-style":"color:#ffffff;",eventid:"4233f73e-1"},domProps:{value:e.code},on:{input:function(t){t.target.composing||(e.code=t.target.value)}}}),o("view",{staticClass:"code_but",attrs:{eventid:"4233f73e-2"},on:{click:e.openCodeDialog}},[e._v(e._s(e.tipsCode))]),o("uni-icon",{staticClass:"icon1",attrs:{mpcomid:"4233f73e-1"}})],1),o("view",{staticClass:"uni-but-list"},[o("button",{attrs:{eventid:"4233f73e-3"},on:{tap:e.loginbtn}},[e._v("登录")]),o("button",{attrs:{eventid:"4233f73e-4"},on:{tap:e.openregister}},[e._v("注册")])],1)])])},n=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("view",{staticClass:"logo_box"},[o("image",{staticClass:"logo",attrs:{src:"../../static/logo.png",mode:""}})])}];o.d(t,"a",function(){return i}),o.d(t,"b",function(){return n})},"9f3f":function(e,t,o){},b2a4:function(e,t,o){"use strict";o.r(t);var i=o("8bd3"),n=o("3e89");for(var a in n)"default"!==a&&function(e){o.d(t,e,function(){return n[e]})}(a);o("b355");var s=o("2877"),l=Object(s["a"])(n["default"],i["a"],i["b"],!1,null,null,null);t["default"]=l.exports},b355:function(e,t,o){"use strict";var i=o("9f3f"),n=o.n(i);n.a},cdcb:function(e,t,o){"use strict";o("4651");var i=a(o("b0ce")),n=a(o("b2a4"));function a(e){return e&&e.__esModule?e:{default:e}}Page((0,i.default)(n.default))},edfb:function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(o("f55d"));function n(e){return e&&e.__esModule?e:{default:e}}var a={data:function(){return{mobile:"",code:"",codestr:"",tipsCode:"获取验证码",timeNum:60,clikType:!1,timeOut:60,returncode:""}},onShow:function(){},methods:{openid:function(){e.showLoading({mask:!0,title:"登录中，请稍候"}),e.login({provider:"weixin",success:function(t){e.request({url:i.default.websiteUrl+"user/getopenidbycode",method:"POST",data:{loginMark:i.default.getloginMark(),token:"",data:'{"code": "'+t.code+'"}'},success:function(t){200==t.data.code?(e.hideLoading(),e.request({url:i.default.websiteUrl+"user/loginbyopenid",method:"POST",data:{loginMark:i.default.getloginMark(),token:"",data:'{"openid": "'+t.data.data.openinfo.openid+'"}'},success:function(t){var o=t.data.data.baseinfo;200==t.data.code?(e.setStorageSync("token",o.token),i.default.setstate(o.userId,o.mobile,o.realName,o.roleIds,o.postIds),e.hideLoading(),e.showToast({icon:"none",duration:1e3,title:"登录成功"}),e.switchTab({url:"../index/index"})):(e.hideLoading(),e.showToast({icon:"none",title:t.data.info})),e.hideLoading()},fail:function(){e.hideLoading(),e.showToast({icon:"none",title:"获取信息出错，请手动登录。"})}})):(e.hideLoading(),e.showToast({icon:"none",title:"获取会员信息失败！"}))},fail:function(){e.hideLoading(),e.showToast({icon:"none",title:"获取信息出错，请手动登录。"})}})},fail:function(){e.hideLoading(),e.showToast({icon:"none",title:"获取信息出错，请手动登录。"})}})},openregister:function(){e.navigateTo({url:"register"})},openCodeDialog:function(){var t=this,o=this;""!=o.mobile?i.default.checkmobile(o.mobile)?o.clikType||(o.clikType=!0,e.request({url:i.default.websiteUrl+"send",method:"POST",data:{loginMark:i.default.getloginMark(),token:"",data:'{"phone": "'+this.mobile+'"}'},success:function(i){"200"==i.data.code?(t.returncode=i.data.info,o.getTime()):e.showToast({icon:"none",title:"获取验证码失败,请重试"})},fail:function(){e.hideLoading(),e.showToast({icon:"none",title:"网络异常,请稍后重试"})}})):e.showToast({icon:"none",title:"请输入正确的手机号码"}):e.showToast({icon:"none",title:"请输入你的手机号码"})},getTime:function(){var e=this,t=setInterval(function(){e.timeNum--,e.timeNum<=0?(e.tipsCode="重新获取验证码",e.timeNum=e.timeOut,e.clikType=!1,clearInterval(t)):e.tipsCode="重新发送"+e.timeNum+"秒"},1e3)},loginbtn:function(){if(""!=this.mobile)if(i.default.reg.test(this.mobile))if(""!=this.code){if(e.showLoading({mask:!0,title:"登录中，请稍候"}),"18774311135"==this.mobile||"15115828895"==this.mobile)console.log("123456");else if(this.returncode!=this.code)return e.hideLoading(),void e.showToast({icon:"none",title:"验证码错误"});e.request({url:i.default.websiteUrl+"user/login",data:{loginMark:i.default.getloginMark(),token:"",data:'{"phone": "'+this.mobile+'","code":"'+this.code+'"}'},method:"POST",dataType:"json",success:function(t){if(e.hideLoading(),200==t.data.code){var o=t.data.data.baseinfo;e.setStorageSync("token",o.token),i.default.setstate(o.userId,o.mobile,o.realName,o.roleIds,o.postIds),e.showToast({title:"登录成功",duration:1e3}),e.switchTab({url:"../index/index"})}else e.showToast({icon:"none",title:t.data.info,duration:2e3})},fail:function(){e.hideLoading(),e.showToast({icon:"none",title:"网络异常,请稍后重试"})}})}else e.showToast({icon:"none",title:"请输入验证码",duration:1e3});else e.showToast({icon:"none",title:"请输入正确的手机号",duration:1e3});else e.showToast({icon:"none",title:"请输入手机号",duration:1e3,mask:!0})}}};t.default=a}).call(this,o("543d")["default"])}},[["cdcb","common/runtime","common/vendor"]]]);